<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["shell","python"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="crusher">Crusher</h1>

<p>Crusher allows you to look at the on-site activity user and determine how the on-site activity is influenced by a users off-site browsing activity.
These are the APIs that power crusher and make it possible to analyze on-site versus off-site activity.</p>

<h2 id="background">Background</h2>

<p>Crusher is a collection of analytics, machine learning and ad-buying technologies that make it possible for a user to: </p>

<ul>
<li>collect information about on-site and off-site activity</li>
<li>classify and understand how these behaviors influence each other</li>
<li>target ads based on these different classifications </li>
</ul>

<h2 id="important-terms">Important Terms</h2>

<p>These are standard terms that are used when referring to different components within crusher. 
They allow us to use common language when thinking about how different pieces of crusher are related to on another.</p>

<h3 id="event">Event</h3>

<p>An event is an atomic unit of interaction on an advertisers website. Currently this is limited to page views and conversions but may expand in the future to include javascript triggered events such as expanding images, scrolling, etc. </p>

<h3 id="action">Action</h3>

<p>An action is a group of events that are all related to the same functionality. For instance, an action may be used to describe all landing pages, even though the individual url for each landing page is different. </p>

<h3 id="funnel">Funnel</h3>

<p>A funnel is a group of actions that occur (often sequentially) that is used to predict a goal. For instance, a user that visits a landing page, a product page and converts would represent a funnel.</p>

<h1 id="authentication">Authentication</h1>

<h2 id="authorization">Authorization</h2>

<p>Most of our APIs require authentication. We demonstrate here how to login using cookie-based authentication.</p>

<h3 id="cookie-based">Cookie-based</h3>

<blockquote>
<p>Use the <code class="prettyprint">/login</code> endpoint, saving your cookie in a file to use for future requests</p>
</blockquote>
<pre class="highlight shell"><code>curl -b cookie -c cookie -X POST -d <span class="s1">'{"username": "my_user", "password": "my_pw"}'</span> <span class="s2">"portal.getrockerbox.com/login"</span>
</code></pre>

<p>To log in using the cookie-based authentication, send a <code class="prettyprint">POST</code> request to <code class="prettyprint">portal.getrockerbox.com/login</code> with an object containing the username and password assigned to you by Rockerbox. </p>

<p>You&rsquo;ll need to have cookies enabled in order to use your credentials in future requests. If using curl, use the <code class="prettyprint">-b</code> and <code class="prettyprint">-c</code> options to read/write your cookie from disk.</p>

<h3 id="header-based">Header-based</h3>

<p>Rick doesn&rsquo;t like APIs that don&rsquo;t have this as an option, so we&rsquo;re going to make this a thing&hellip;at some point.</p>

<h3 id="permissions">Permissions</h3>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight shell"><code>curl -b cookie -c cookie <span class="s2">"portal.getrockerbox.com/account/permissions"</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"results"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"external_advertiser_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">987654</span><span class="p">,</span><span class="w">
            </span><span class="nt">"pixel_source_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"examle_advertiser_1"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"advertiser_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Advertiser One"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"selected"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"external_advertiser_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456</span><span class="p">,</span><span class="w">
            </span><span class="nt">"pixel_source_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example_advertiser_2"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"advertiser_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Advertiser Two"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"selected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Once authenticated, you can use <code class="prettyprint">/account/permissions</code> to view the advertisers you have access to.</p>

<h1 id="on-site-activity">On-site Activity</h1>

<p>These APIs allow us to search for a particular pattern or group of patterns that occur on the query string of the on-page url. 
The search APIs give us the ability to look at the following characterstics about a patterns:</p>

<ul>
<li>URLs: these are the URLs that match the pattern</li>
<li>UIDs: these are the UIDs that match the pattern</li>
<li>Count: this gives us a summary about the pattern</li>
<li>Timeseries: this gives us a timeseries summary about how the pattern changes over time</li>
</ul>

          <h2 id="pattern-search">Pattern search</h2>

<blockquote>
<p>Request (count for a single pattern): </p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># TODO: !!</span>
<span class="c"># current -- needs format and advertiser on end of URL "&amp;format=json&amp;advertiser=baublebar"</span>
<span class="c"># proposed -- use authentication</span>

curl <span class="s2">"http://crusher.getrockerbox.com/crusher/search/count?search=necklaces"</span> 

</code></pre>

<blockquote>
<p>Response (count for single pattern):</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"logic"</span><span class="p">:</span><span class="w"> </span><span class="s2">"should"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"search"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"necklaces"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"summary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"num_users"</span><span class="p">:</span><span class="w"> </span><span class="mi">1200</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Request 
- urls that match pattern</p>
</blockquote>
<pre class="highlight shell"><code>
curl <span class="s2">"http://crusher.getrockerbox.com/crusher/search/urls?search=rockerbox"</span>
</code></pre>

<blockquote>
<p>Response 
- urls that match pattern</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
    <span class="s2">"logic"</span>: <span class="s2">"must"</span>,
    <span class="s2">"results"</span>: <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">"count"</span>: 1,
            <span class="s2">"url"</span>: <span class="s2">"http://www.baublebar.com/whats-new/just-added.html?cvosrc=display.rockerbox.072015_JulyDigAdsRefresh_300x250_3_9718787&amp;utm_source=rockerbox&amp;utm_medium=display&amp;utm_campaign=072015_JulyDigAdsRefresh_300x250_3_9718787"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">"count"</span>: 1,
            <span class="s2">"url"</span>: <span class="s2">"http://www.baublebar.com/whats-new/just-added.html?cvosrc=display.rockerbox.072015_JulyDigAdsRefresh_300x600_1_4279296&amp;utm_source=rockerbox&amp;utm_medium=display&amp;utm_campaign=072015_JulyDigAdsRefresh_300x600_1_4279296"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">"count"</span>: 1,
            <span class="s2">"url"</span>: <span class="s2">"http://www.baublebar.com/whats-new/just-added.html?cvosrc=display.rockerbox.072015_JulyDigAdsRefresh_728x90_1_3810899&amp;utm_source=rockerbox&amp;utm_medium=display&amp;utm_campaign=072015_JulyDigAdsRefresh_728x90_1_3810899"</span>
        <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">"search"</span>: <span class="o">[</span>
        <span class="s2">"rockerbox"</span>
    <span class="o">]</span>,
    <span class="s2">"summary"</span>: <span class="o">{</span>
        <span class="s2">"num_urls"</span>: 3,
        <span class="s2">"num_users"</span>: 3
    <span class="o">}</span>,
    <span class="s2">"timeout"</span>: 60
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Request 
- uids for multiple patterns using <strong>AND</strong> logic</p>
</blockquote>
<pre class="highlight shell"><code>
<span class="c"># TODO: !!</span>
<span class="c"># current (defaults to or)</span>
<span class="c"># propsoed (should default to AND)</span>
curl <span class="s2">"http://crusher.getrockerbox.com/crusher/search/uids?search=necklaces,pepperjam"</span>
</code></pre>

<blockquote>
<p>Response 
- uids for multiple patterns using <strong>AND</strong> logic</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
    <span class="s2">"logic"</span>: <span class="s2">"must"</span>,
    <span class="s2">"results"</span>: <span class="o">[</span>
        <span class="s2">"1658345989907319038"</span>,
        <span class="s2">"8544236950523550015"</span>,
        <span class="s2">"3647988598677495450"</span>,
        <span class="s2">"8377247509133269564"</span>,
        <span class="s2">"8728953026525723133"</span>,
        <span class="s2">"4371882728305824796"</span>,
        <span class="s2">"4355801865744751912"</span>,
        <span class="s2">"3071870354224070944"</span>,
        <span class="s2">"8282590386514880072"</span>,
        <span class="s2">"5213257658303005847"</span>,
        <span class="s2">"682573251720908722"</span>
    <span class="o">]</span>,
    <span class="s2">"search"</span>: <span class="o">[</span>
        <span class="s2">"necklaces"</span>,
        <span class="s2">"pepperjam"</span>
    <span class="o">]</span>,
    <span class="s2">"summary"</span>: <span class="o">{</span>
        <span class="s2">"num_users"</span>: 11
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Request 
- timeseries for multiple patterns using <strong>AND</strong> logic</p>
</blockquote>
<pre class="highlight shell"><code>
<span class="c"># TODO: !!</span>
<span class="c"># current (defaults to or)</span>
<span class="c"># propsoed (should default to AND)</span>
curl <span class="s2">"http://crusher.getrockerbox.com/crusher/search/timeseries?search=necklaces,pepperjam"</span>
</code></pre>

<blockquote>
<p>Response 
- timeseries for multiple patterns using <strong>AND</strong> logic</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
    <span class="s2">"logic"</span>: <span class="s2">"must"</span>,
    <span class="s2">"results"</span>: <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">"date"</span>: <span class="s2">"2015-07-29 00:00:00"</span>,
            <span class="s2">"num_users"</span>: 4,
            <span class="s2">"num_visits"</span>: 5
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">"date"</span>: <span class="s2">"2015-07-30 00:00:00"</span>,
            <span class="s2">"num_users"</span>: 7,
            <span class="s2">"num_visits"</span>: 7
        <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">"search"</span>: <span class="o">[</span>
        <span class="s2">"necklaces"</span>,
        <span class="s2">"pepperjam"</span>
    <span class="o">]</span>,
    <span class="s2">"summary"</span>: <span class="o">{</span>
        <span class="s2">"num_users"</span>: 11,
        <span class="s2">"num_visits"</span>: 12
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Request 
- timeseries for multiple patterns using <strong>OR</strong> logic</p>
</blockquote>
<pre class="highlight shell"><code>
curl <span class="s2">"http://crusher.getrockerbox.com/crusher/search/timeseries?search=necklaces,pepperjam&amp;logic=or"</span>
</code></pre>

<blockquote>
<p>Response 
- timeseries for multiple patterns using <strong>OR</strong> logic</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
    <span class="s2">"logic"</span>: <span class="s2">"should"</span>,
    <span class="s2">"results"</span>: <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">"date"</span>: <span class="s2">"2015-07-29 00:00:00"</span>,
            <span class="s2">"num_users"</span>: 708,
            <span class="s2">"num_visits"</span>: 2327
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">"date"</span>: <span class="s2">"2015-07-30 00:00:00"</span>,
            <span class="s2">"num_users"</span>: 993,
            <span class="s2">"num_visits"</span>: 2858
        <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">"search"</span>: <span class="o">[</span>
        <span class="s2">"necklaces"</span>,
        <span class="s2">"pepperjam"</span>
    <span class="o">]</span>,
    <span class="s2">"summary"</span>: <span class="o">{</span>
        <span class="s2">"num_users"</span>: 1653,
        <span class="s2">"num_visits"</span>: 5185
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p>This endpoint allows us to search for the occurance of a pattern or multiple patterns within a single URL.</p>

<p>The pattern search API supports:</p>

<ul>
<li>four query result types (urls, uids, count, timeseries).</li>
<li>two types of logic when searching for a pattern within a URL (&ldquo;or&rdquo;,&ldquo;and&rdquo;)</li>
</ul>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://crusher.getrockerbox.com/crusher/search/&lt;QUERY_TYPE&gt;</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>search</td>
<td>None</td>
<td>this is a <em>required</em> field. it is a string or comman seperated string of terms  we will look for in the URL. If multiple terms are used, the logic parameter will be used param will be used to perform the search</td>
</tr>
<tr>
<td>logic</td>
<td>and</td>
<td>this specifies the logic to use for a search term. specifically, if we are looking for nature,nuture in a url, or would require either nature or nuture, and would require both nature and nuture</td>
</tr>
<tr>
<td>format</td>
<td>json</td>
<td>this specifies the response type. currently only json is supported</td>
</tr>
<tr>
<td>timeout</td>
<td>60</td>
<td>this is the amount of time in seconds we will attempt to process the query before timing out. Its default and max value is 60 seconds</td>
</tr>
</tbody></table>

<aside class="default">Note that the search field is required for all queries</aside>

<h3 id="json-response">JSON Response</h3>

<p>The JSON response will be formatted with the following fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>search</td>
<td>these are the terms entered as commas seperated values to the search QS parameter</td>
</tr>
<tr>
<td>logic</td>
<td>this is the logic used interally to evaluate URLs against the pattern(s) specified</td>
</tr>
<tr>
<td>summary</td>
<td>this is a summary object describing the results. depending on the query type it will have different values but will always be present</td>
</tr>
<tr>
<td>results</td>
<td>the result object is based on the query type. It will be present for all results with the exception of the count, which will only have a summary object</td>
</tr>
</tbody></table>

<h3 id="json-result-objects">JSON Result Objects</h3>

<p>This describes the different JSON Result object types that one can expect for the different query types</p>

<table><thead>
<tr>
<th>Query Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>urls</td>
<td>this is a list of objects that contain the URL and the number of matches for that url. it will be sorted based on count</td>
</tr>
<tr>
<td>uids</td>
<td>this is a list of UID strings associated with the pattern</td>
</tr>
<tr>
<td>timeseries</td>
<td>this is a timeseries which shows the counts at each respective date</td>
</tr>
</tbody></table>

<aside class="warning">Note that the **count** query type does not have a results object present</aside>

          <h2 id="pattern-group-url-search">Pattern Group URL Search</h2>

<p>This endpoint allows us search for users who visited multiple URL patterns and get the union or intersection of the visits that have occured on these matched pages. </p>

<p>Similar to the the single URL search, this API support:</p>

<ul>
<li>the query result types: (uids,count,timeseries)</li>
<li>two type of logic: (union, intersection)</li>
</ul>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://crusher.getrockerbox.com/crusher/pattern_search/&lt;QUERY_TYPE&gt;</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>search</td>
<td>None</td>
<td>this is a <strong>required</strong> field. the search string is made up of comman seperated patterns and pipe seperated pattern groups. the comma seperated pattern requires all occurances of the pattern to be present in matched urls. the pipe seperation between pattern allows one to look at either the union or intersection of the users who have visited urls that matched the pattern string.</td>
</tr>
<tr>
<td>logic</td>
<td>intersection</td>
<td>this specifies whether were looking at the union or intersection of the pattern strings. A union results in reporting based on all the patterns matched. An intersection is looking at the intersection of the two patterns</td>
</tr>
<tr>
<td>format</td>
<td>json</td>
<td>this specifies the response type. currently only json is supported</td>
</tr>
<tr>
<td>timeout</td>
<td>60</td>
<td>this is the amount of time in seconds we will attempt to process the query before timing out. Its default and max value is 60 seconds</td>
</tr>
</tbody></table>

<h3 id="more-on-the-quot-search-quot-and-quot-logic-quot-parameters">More on the &ldquo;search&rdquo; and &ldquo;logic&rdquo; parameters</h3>

<p>The search parameter is made up of multiple <strong>URL pattern strings</strong> seperated by pipe characters. 
A <strong>URL pattern string</strong> is a comma seperated string of values, e.g. &ldquo;nature,nuture&rdquo;.
When this API evaluates a URL pattern string, the indivual patterns will be evaluated using an  <strong>AND</strong> operation, meaning that every url that matches this pattern must contain all terms in the string.</p>

<p>The following is an example of two URL pattern strings used as a search parameter:</p>

<p><code class="prettyprint">/crusher/pattern_search?search=nature,nuture|wild</code></p>

<p>Each URL pattern string is used to find the users associated with each URL pattern string.</p>

<table><thead>
<tr>
<th>Pattern</th>
<th>Users</th>
</tr>
</thead><tbody>
<tr>
<td>nature,nuture</td>
<td>User group 1</td>
</tr>
<tr>
<td>wild</td>
<td>User group 2</td>
</tr>
</tbody></table>

<p>The logic parameter will then be used to either take the union or the intersection of the users that match. </p>

<table><thead>
<tr>
<th>Logic</th>
<th>Matches</th>
</tr>
</thead><tbody>
<tr>
<td>Union</td>
<td>users who match any of the patterns</td>
</tr>
<tr>
<td>Intersection</td>
<td>users who many all of the patterns</td>
</tr>
</tbody></table>

<p>Finally, the eligible users will be selected out of the overall data set and an aggregated result will be returned. Specifically,</p>

<table><thead>
<tr>
<th>Logic</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Union</td>
<td>This is an aggregation of all of the resulting patterns</td>
</tr>
<tr>
<td>Intersection</td>
<td>The resulting data set is an aggregation of all (URL, user) combinations from any pattern in search parameter but limited to the subset of the user groups</td>
</tr>
</tbody></table>

          <h2 id="multi-pattern-group-search">Multi Pattern Group search</h2>

<p>This endpoint allows us search for statistics about the sequential intersection of multiple pattern groups. This API builds off of the pattern group concept introduced in the [Pattern Group URL Search] API.</p>

<p>Similar to the the Pattern Group URL search, this API shares the idea of the pattern group, but limits the logic of a pattern group to look only at the union of a pattern. </p>

<p>Similar to the other search APIs. this API allows the user to specify:</p>

<ul>
<li>the logic used between pattern groups (union, funnel)</li>
<li>the result type: (count, uids, domains)</li>
</ul>

<p>To represent the logic between pattern groups, the &ldquo;&gt;&rdquo; operator is used to demarcate distinct pattern groups. This operators was chosen because it helps to represent the sequential nature of the computed intersection (the default behavior of the API).</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://crusher.getrockerbox.com/crusher/multi_pattern_search/&lt;QUERY_TYPE&gt;</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>search</td>
<td>None</td>
<td>this is a <strong>required</strong> field. the search string is made up of &gt; seperated pattern groups. See the pattern group API to</td>
</tr>
<tr>
<td>logic</td>
<td>funnel</td>
<td>this specifies whether were looking at the union or intersection of the pattern groups.</td>
</tr>
<tr>
<td>format</td>
<td>json</td>
<td>this specifies the response type. currently only json is supported</td>
</tr>
<tr>
<td>timeout</td>
<td>60</td>
<td>this is the amount of time in seconds we will attempt to process the query before timing out. Its default and max value is 60 seconds</td>
</tr>
</tbody></table>

<h3 id="more-about-multiple-pattern-group-evaluation">More about multiple pattern group evaluation</h3>

<p>The search parameter is made up of multiple pattern groups seperated by <strong>&gt;</strong> characters. </p>

<p><code class="prettyprint">
?search=[pattern_group1]&gt;[pattern_group_2]&gt;[pattern_group_3]
</code></p>

<p>When this API evaluates each pattern group, it uses the default <strong>UNION</strong> logic to evaluate the pattern group meaning that all users who visited a URL that matched either pattern in a group are included. Also note that within a pattern the default <strong>AND</strong> logic is also used.</p>

<h3 id="logic-operator">Logic Operator</h3>

<p>The <strong>&gt;</strong> operator then takes the result of each pattern group and evaluates either:</p>

<ul>
<li>a sequential intersection (a funnel)</li>
<li>a union (a union)</li>
</ul>

<h3 id="logic-types">Logic Types:</h3>

<p><strong>1. Funnel (Sequential intersection)</strong></p>

<p>The default behavior is to perform a sequential intersection (funnel) of users. More specifically, this is best described as:</p>

<table><thead>
<tr>
<th>Step</th>
<th>Users</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>User in Group 1</td>
</tr>
<tr>
<td>2</td>
<td>User in Group 1 AND Group 2</td>
</tr>
<tr>
<td>3</td>
<td>User in Group 1 AND Group 2 AND Group 3</td>
</tr>
</tbody></table>

<p>implying that each sequential group will be smaller than the previous. </p>

<p><strong>2. Union</strong></p>

<p>The union logic type is included to make it convienent to get back information about the entire state space that the intersection is operating over. </p>

<p>More specifically, we can describe this as follows:</p>

<table><thead>
<tr>
<th>Step</th>
<th>Users</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>User in Group 1</td>
</tr>
<tr>
<td>2</td>
<td>User in Group 1 OR Group 2</td>
</tr>
<tr>
<td>3</td>
<td>User in Group 1 OR Group 2 OR Group 3</td>
</tr>
</tbody></table>

<p>implying that each sequential group will be larger than the previous. </p>

<h3 id="response-types">Response Types</h3>

<p><strong>1. count</strong></p>

<ul>
<li>this is the count of users in each bucket</li>
</ul>

<p><strong>2. uids</strong></p>

<ul>
<li>this is the raw user ids for users in each bucket</li>
</ul>

<p><strong>3. domains</strong></p>

<ul>
<li>this is the domain associated with the users in each bucket</li>
</ul>

<p><strong>4. all</strong></p>

<ul>
<li>this is all of the information</li>
</ul>

<h3 id="example">Example</h3>

<p>The following is an example of two URL pattern strings used as a search parameter:</p>

<p><code class="prettyprint">/crusher/multi_pattern_search?search=signup&gt;nature|wild&gt;checkout</code></p>

<p>Our evaluation for each step would then look like the following:</p>

<table><thead>
<tr>
<th>Step</th>
<th>Users</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>Visited signup page</td>
</tr>
<tr>
<td>2</td>
<td>Visited signup page AND visited a (nature OR wild) urls</td>
</tr>
<tr>
<td>3</td>
<td>Visited signup page AND visited a (nature OR wild) urls AND checked out</td>
</tr>
</tbody></table>

          <h1 id="errors">Errors</h1>

<aside class="notice">This error section is stored in a separate file in `includes/_errors.md`. Slate allows you to optionally separate out your docs into many files&hellip;just save them to the `includes` folder and add them to the top of your `index.md`&rsquo;s frontmatter. Files are included in the order listed.</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The kitten requested is hidden for administrators only</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified kitten could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a kitten with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json</td>
</tr>
<tr>
<td>410</td>
<td>Gone &ndash; The kitten requested has been removed from our servers</td>
</tr>
<tr>
<td>418</td>
<td>I&rsquo;m a teapot</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
